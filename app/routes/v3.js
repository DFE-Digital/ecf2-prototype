// Change versions here
var v = '/v3/'
var vGet = 'v3/'

var dpLp = {
    "Academy Transformation Trust": "Ambition Institute",
        "Advantage Schools": "Ambition Institute",
        "Ark Schools": "Ambition Institute",
        "Astrea Academy Trust": "Ambition Institute",
        "BDAT (In partnership with Beckfoot and Dixon)": "Ambition Institute",
        "Calderdale & Kirklees TSH": "Ambition Institute",
        "Central London TSH": "Ambition Institute",
        "Diocese of Hallam": "Ambition Institute",
        "East Midlands Teacher Training Partnership EMTTP": "Ambition Institute",
        "Eden Academy Trust": "Ambition Institute",
        "Exceed AT / Bradford TSH": "Ambition Institute",
        "Five Counties TSHs Alliance": "Ambition Institute",
        "Forward as One": "Ambition Institute",
        "GLF West Sussex TSH": "Ambition Institute",
        "Greenwood Academies Trust": "Ambition Institute",
        "Hampshire CC": "Ambition Institute",
        "Haybridge TSH": "Ambition Institute",
        "Inspiration Teaching School Hub": "Ambition Institute",
        "Julian TSH": "Ambition Institute",
        "Learning in Harmony Mult Academy Trust": "Ambition Institute",
        "London District East TSH": "Ambition Institute",
        "Manor MAT": "Ambition Institute",
        "North West London TSH": "Ambition Institute",
        "Ormiston Academy Trust": "Ambition Institute",
        "Pathfinder": "Ambition Institute",
        "Shaw Education Trust": "Ambition Institute",
        "Spencer Academies Trust": "Ambition Institute",
        "St Thomas Aquinas MAT / Leicestershire and Rutland TSH": "Ambition Institute",
        "STEP Academy Trust": "Ambition Institute",
        "Swindon & Wiltshire TSH": "Ambition Institute",
        "The Active Learning Trust": "Ambition Institute",
        "The Prince Henry's High School Academy Trust": "Ambition Institute",
        "The Tenax Schools Trust (Kent Teaching School Hub)": "Ambition Institute",
        "The Three Rivers Teaching School Hub": "Ambition Institute",
        "United Learning Trust": "Ambition Institute",
        "Unity TSH - PLN": "Ambition Institute",
        "Westcountry Schools Trust": "Ambition Institute",
        "Alban TSH": "Best Practice Network",
        "Alpha Trust": "Best Practice Network",
        "Aspire Academy Trust": "Best Practice Network",
        "Astra TSH": "Best Practice Network",
        "Benfleet TSA": "Best Practice Network",
        "Best Practice Network": "Best Practice Network",
        "Bishop Challoner Training School Alliance": "Best Practice Network",
        "Blueprint Alliance": "Best Practice Network",
        "Bracknell Forest Partnership": "Best Practice Network",
        "Cheshire TSH": "Best Practice Network",
        "Chiltern TSH": "Best Practice Network",
        "Churchdown School Academy": "Best Practice Network",
        "Collaboration of Glossop Schools": "Best Practice Network",
        "Community Academies Trust Teaching School (CATTS)": "Best Practice Network",
        "ConnectEd Partnership": "Best Practice Network",
        "Danes Educational Trust": "Best Practice Network",
        "Derby Diocesan Academy Trust": "Best Practice Network",
        "Futures Teaching Alliance": "Best Practice Network",
        "Hatton Academies Trust": "Best Practice Network",
        "Lindens TSA": "Best Practice Network",
        "Loreto Grammar": "Best Practice Network",
        "Nova Education Trust": "Best Practice Network",
        "Primitas Learning Partnership": "Best Practice Network",
        "Rainbow TSH": "Best Practice Network",
        "Services for Education": "Best Practice Network",
        "Shropshire and Telford Education Partnership (STEP)": "Best Practice Network",
        "South East London Catholic Academy Trust (SELCAT)": "Best Practice Network",
        "The Dean Trust Teaching School": "Best Practice Network",
        "The Education People": "Best Practice Network",
        "The Elliot Foundation Academies Trust": "Best Practice Network",
        "The Golden Thread TSH": "Best Practice Network",
        "The Green School Trust": "Best Practice Network",
        "The Learning Partnership": "Best Practice Network",
        "The Mercian Trust": "Best Practice Network",
        "The Pegasus Partnership Trust": "Best Practice Network",
        "Victoria Academies Trust": "Best Practice Network",
        "Watergrove Trust": "Best Practice Network",
        "Wessex MAT": "Best Practice Network",
        "Arthur Terry Teaching School Hub": "Education Development Trust",
        "Camden Learning": "Education Development Trust",
        "Five Counties Teaching School Hub": "Education Development Trust",
        "Flying High Teaching School Hub": "Education Development Trust",
        "Forest Learning Alliance": "Education Development Trust",
        "HISP Teaching School Hub": "Education Development Trust",
        "John Taylor Teaching School Hub": "Education Development Trust",
        "L4NE/BWCET": "Education Development Trust",
        "LEAD Teaching School Hub": "Education Development Trust",
        "Northern Lights Teaching School Hub: South Tyne & Wear": "Education Development Trust",
        "Potentia Teaching School Hub": "Education Development Trust",
        "REAch2 Multi Academy Trust": "Education Development Trust",
        "Redhill Teaching Hub": "Education Development Trust",
        "South Yorkshire Teaching School Hub": "Education Development Trust",
        "Swindon and Wiltshire Teaching School Hub": "Education Development Trust",
        "Thames Gateway Teaching School Hub": "Education Development Trust",
        "The University of Winchester": "Education Development Trust",
        "Tudor Grange Academy": "Education Development Trust",
        "Laurus Institute": "National Institute of Teaching",
        "Learn - AT": "National Institute of Teaching",
        "NELT Teaching School Hub": "Teach First",
        "NIoT @ Oasis": "National Institute of Teaching",
        "NIoT @ Outwood Grange Academies Trust": "National Institute of Teaching",
        "NIoT @ Star Academies": "National Institute of Teaching",
        "NIoT @The Harris Federation": "National Institute of Teaching",
        "OneCornwall West": "National Institute of Teaching",
        "Rivers Teaching Alliance": "National Institute of Teaching",
        "Sea View": "National Institute of Teaching",
        "SWIFT": "National Institute of Teaching",
        "The David Ross Education Trust": "National Institute of Teaching",
        "Unity Schools Partnership": "National Institute of Teaching",
        "White Horse": "National Institute of Teaching",
        "Windsor Academy Trust": "National Institute of Teaching",
        "Aldridge Education (MAT)": "Teach First",
        "Aletheia Academies Trust": "Teach First",
        "Ascend Learning Trust": "Teach First",
        "Aspirations Academies Trust": "Teach First",
        "Bright Futures teaching School Hub": "Teach First",
        "Cambridgeshire and Peterborough Teaching School Hub": "Teach First",
        "Colyton Teaching School Hub (Devon)": "Teach First",
        "Dudley Academies Trust": "Teach First",
        "Embrace Teaching School Hub (SW Lancashire)": "Teach First",
        "Fylde Coast Academy Trust": "Teach First",
        "Generate Teaching School Hub": "Teach First",
        "Kingsbridge Teaching School Hub (Devon)": "Teach First",
        "Leeds Trinity University": "Teach First",
        "Leicester and Leicestershire Teaching School Hub": "Teach First",
        "Northamptonshire Teaching School Hub": "Teach First",
        "One Cornwall Teaching School Hub (East Cornwall)": "Teach First",
        "One Cornwall Teaching School Hub (West)": "Teach First",
        "One Cumbria Teaching School Hub": "Teach First",
        "Saffron Teaching School Hub": "Teach First",
        "SFET Teaching School Hub": "Teach First",
        "St Joseph Catholic Multi Academy Trust": "Teach First",
        "Teach First Direct Delivery": "Teach First",
        "The Vantage Teaching School Hub North Humber": "Teach First",
        "Xavier Teaching School Hub": "Teach First",
        "Balcarras Teaching School Hub": "UCL Institute of Education",
        "Berkshire Teaching School Hub": "UCL Institute of Education",
        "Birmingham City University": "UCL Institute of Education",
        "Coventry and Central Warwickshire": "UCL Institute of Education",
        "East London Teaching School Hub": "UCL Institute of Education",
        "East Manchester Teaching School Hub": "UCL Institute of Education",
        "Exchange Teaching Hub (Barnsley and Doncaster)": "UCL Institute of Education",
        "Exchange Teaching Hub (Selby and Wakefield)": "UCL Institute of Education",
        "Haringey Education Partnership": "UCL Institute of Education",
        "Inspire Teaching School Hub": "UCL Institute of Education",
        "Leeds Teaching School Hub": "UCL Institute of Education",
        "London South Teaching School Hub": "UCL Institute of Education",
        "Milton Keynes Education Partnership": "UCL Institute of Education",
        "NETSP with Tees Valley Teaching School Hub": "UCL Institute of Education",
        "Odyssey Teaching School Hub": "UCL Institute of Education",
        "Oxfordshire Teaching School Hub": "UCL Institute of Education",
        "Red Kite Teaching School Hub": "UCL Institute of Education",
        "Redbridge Education Partnership": "UCL Institute of Education",
        "South Central Teaching School Hub": "UCL Institute of Education",
        "Sussex Coast Schools Alliance": "UCL Institute of Education",
        "Teach West London Teaching School Hub": "UCL Institute of Education",
        "Thames South Teaching School Hub": "UCL Institute of Education",
        "Wandle Teaching School Hub": "UCL Institute of Education"
}

// Add any directory variables here
var school = 'school/'
var mentor = 'mentor/'

module.exports = router => {

    // start page
    router.post(v + school + 'start', (req, res) => {
        res.redirect(v + school + 'dfe-sign-in')
    })

    // dfe sign in page
    router.post(v + school + 'dfe-sign-in', (req, res) => {
        res.redirect(v + school + 'what-youll-need')
    })

    // **** prototype set up ****

    router.post(v + school + 'setup', (req, res) => {
        res.redirect(v + school + 'start')
    })

    // **** set up custom scenarios ****

    router.get(v + school + 'setup-scenario-1', (req, res) => {
        req.session.data['defaultsAlreadyAdded'] = 'no'
        req.session.data['mentorsAddedPreviously'] = 'yes'
        res.redirect(v + school + 'start')
    })

    router.get(v + school + 'setup-scenario-2', (req, res) => {
        req.session.data['defaultsAlreadyAdded'] = 'no'
        req.session.data['mentorsAddedPreviously'] = 'no'
        res.redirect(v + school + 'start')
    })

    // what you'll need
    router.post(v + school + 'what-youll-need', (req, res) => {
        res.redirect(v + school + 'find-ect')
    })

    // add ECT from here

    router.post(v + school + 'find-ect', (req, res) => {
        if (req.session.data['askForNino'] === 'yes') {
            res.redirect(v + school + 'nino')
        }
        else {
            res.redirect(v + school + 'review-ect-details')
        }
    })

    router.post(v + school + 'nino', (req, res) => {
        res.redirect(v + school + 'review-ect-details')
    })

    router.post(v + school + 'review-ect-details', (req, res) => {
        res.redirect(v + school + 'email-address')
    })

    router.post(v + school + 'nino', (req, res) => {
        res.redirect(v + school + 'email-address')
    })

    router.post(v + school + 'email-address', (req, res) => {
        if (req.session.data['defaultsAlreadyAdded'] === 'no') {
            res.redirect(v + school + 'programme-type')
        }
        else {
            res.redirect(v + school + 'will-you-use-defaults')
        }
    })

    router.post(v + school + 'will-you-use-defaults', (req, res) => {
        if (req.session.data['useDefaults'] === 'no') {
            res.redirect(v + school + 'programme-type')
        }
        else {
            if (req.session.data['mentorsAddedPreviously'] === 'no') {
                res.redirect(v + school + 'check-answers')
            }
            else {
                res.redirect(v + school + 'mentor')
            }
        }
    })

    // adding programme information that is not default

    router.post(v + school + 'programme-type', (req, res) => {
        if (req.session.data['programmeType'] === 'School-led') {
            res.redirect(v + school + 'appropriate-body')
        }
        else {
            res.redirect(v + school + 'autocomplete-delivery-partner')
        }
    })

    // router.post(v + school + 'lead-provider', (req, res) => {
    //     res.redirect(v + school + 'delivery-partner')
    // })
    //
    // router.post(v + school + 'delivery-partner', (req, res) => {
    //     res.redirect(v + school + 'appropriate-body')
    // })

    router.post(v + school + 'autocomplete-delivery-partner', (req, res) => {
        const dp = req.session.data['deliveryPartner'] ? req.session.data['deliveryPartner'].trim() : '';
        console.log('Delivery Partner:', dp);
        console.log('DP/LP pairings:', dpLp);
        const correspondingValue = dpLp[dp] || dpLp[dp.toLowerCase()] || dpLp[dp.toUpperCase()];
        if (correspondingValue) {
            req.session.data.leadProvider = correspondingValue;
        } else {
            req.session.data.leadProvider = 'Ambition Institute'
        }
        console.log('Lead Provider:', req.session.data.leadProvider);
        res.redirect(v + school + 'appropriate-body')
    })

    router.post(v + school + 'appropriate-body', (req, res) => {
        res.redirect(v + school + 'save-programme-details')
    })


    router.post(v + school + 'save-programme-details', (req, res) => {
        if (req.session.data['mentorsAddedPreviously'] === 'no') {
            res.redirect(v + school + 'check-answers')
        }
        else {
            res.redirect(v + school + 'mentor')
        }
    })

    // end of adding non-default programme information

    router.post(v + school + 'mentor', (req, res) => {
        res.redirect(v + school + 'check-answers')
    })

    router.post(v + school + 'check-answers', (req, res) => {
        if (req.session.data['mentor'] === 'Add a new mentor later' || req.session.data['mentorsAddedPreviously'] === 'no') {
            res.redirect(v + school + 'confirmation-mentor-to-be-added')
            req.session.data = []
        }
        else {
            res.redirect(v + school + 'confirmation')
            req.session.data = []
        }
    })

    // mentor journeys

    router.post(v + school + mentor + 'what-youll-need', (req, res) => {
        res.redirect(v + school + mentor + 'mentor-will-be-assigned-to')
    })

    router.post(v + school + mentor + 'mentor-will-be-assigned-to', (req, res) => {
        res.redirect(v + school + mentor + 'find-mentor')
    })

    router.post(v + school + mentor + 'find-mentor', (req, res) => {
        res.redirect(v + school + mentor + 'review-mentor-details')
    })

    router.post(v + school + mentor + 'review-mentor-details', (req, res) => {
        res.redirect(v + school + mentor + 'email-address')
    })

    router.post(v + school + mentor + 'email-address', (req, res) => {
        res.redirect(v + school + mentor + 'will-you-use-defaults')
    })

    router.post(v + school + mentor + 'will-you-use-defaults', (req, res) => {
        res.redirect(v + school + mentor + 'check-answers')
    })

    router.post(v + school + mentor + 'check-answers', (req, res) => {
        res.redirect(v + school + mentor + 'confirmation')
    })
}